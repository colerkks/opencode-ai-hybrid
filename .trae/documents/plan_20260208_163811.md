# OpenCode AI Hybrid 完善与修复计划

根据您的要求，我们先验证构建，然后根据文档和代码的对比结果进行功能补全和优化。

## 阶段 1: 验证构建 (Build Verification)
> **目标**: 确保所有组件都能在当前环境下正确编译。

1.  **OpenCode Plugin 构建**:
    *   进入 `plugins/opencode-ai-hybrid-plugin`
    *   执行 `npm install` 安装依赖
    *   执行 `npm run build` 验证 TypeScript 编译
2.  **VS Code Extension 构建**:
    *   进入 `vscode-extension`
    *   执行 `npm install` 安装依赖
    *   执行 `npm run compile` 验证编译
3.  **修复构建错误**: 如果在上述步骤中发现任何错误（如类型不匹配、缺少的依赖），立即进行修复。

## 阶段 2: 功能补全 (Feature Completion)
> **目标**: 补全文档中承诺但尚未实现的功能，特别是 "Config Manager"。

### 1. 扩展 Config Manager 功能
文档提到 "Config Manager - Edit AGENTS.md and configuration files"，但目前缺少编辑入口。
*   **添加新命令**:
    *   `hybridArch.editGlobalConfig`: 打开全局 `AGENTS.md`
    *   `hybridArch.editProjectConfig`: 打开项目级 `AGENTS.md`
*   **更新 VS Code 菜单**:
    *   在 `package.json` 中注册新命令。
    *   将命令添加到 Command Palette 和 Tree View 的标题栏菜单中。

### 2. 更新 Dashboard
*   在 Dashboard 面板中添加 "Edit Config" 按钮，方便用户快速访问配置文件。

## 阶段 3: 代码优化与标准化 (Refactoring)
> **目标**: 提高代码质量和跨平台兼容性。

1.  **统一构建配置**:
    *   将 `vscode-extension/tsconfig.json` 的 `target` 升级为 `ES2022`，与插件保持一致（除非有特定的旧版 VS Code 兼容需求）。
2.  **优化路径处理**:
    *   修改 `vscode-extension/src/core/ConfigManager.ts`，使用 `os.homedir()` 替代环境变量读取，提高 Windows/macOS/Linux 的兼容性。

## 执行顺序
我们将按照 **阶段 1 -> 阶段 2 -> 阶段 3** 的顺序执行。每完成一个阶段，都会进行验证。
